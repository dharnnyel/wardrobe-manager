<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>StyleHub - Settings</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#9F7AEA',
                        secondary: '#4FD1C5',
                        accent: '#FC8181',
                        light: '#F7FAFC',
                        dark: '#2D3748',
                        success: '#68D391',
                    },
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                    },
                    screens: {
                        md: '768px',
                        lg: '1024px',
                        xl: '1280px',
                    },
                },
            },
        };
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            transition: all 0.3s ease;
        }

        .gradient-bg {
            background: linear-gradient(135deg, #9f7aea 0%, #4fd1c5 100%);
        }

        .nav-link {
            position: relative;
            transition: all 0.3s ease;
            white-space: nowrap;
            overflow: hidden;
        }

        .nav-link:hover {
            background-color: rgba(159, 122, 234, 0.1);
        }

        .nav-link.active {
            background-color: rgba(159, 122, 234, 0.15);
            border-right: 3px solid #9f7aea;
        }

        .settings-section {
            transition: all 0.3s ease;
            display: none;
        }

        .settings-section.active {
            display: block;
        }

        .settings-section:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        /* Sidebar Styles */
        .sidebar {
            transition: all 0.3s ease;
            height: 100vh;
            overflow-y: auto;
            border-right: 1px solid #e5e7eb;
        }

        /* Mobile (default) - Hidden sidebar */
        .sidebar {
            transform: translateX(-100%);
            position: fixed;
            z-index: 50;
            width: 280px;
        }

        .sidebar.mobile-open {
            transform: translateX(0);
        }

        .sidebar-overlay.active {
            display: block;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 40;
        }

        /* Toggle Button - Moves with sidebar */
        .toggle-btn {
            transition: all 0.3s ease;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
            position: fixed;
            left: 240px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 80;
        }

        .sidebar.collapsed-lg .toggle-btn {
            left: 80px;
        }

        .sidebar.mobile-open .toggle-btn {
            left: 280px;
        }

        .toggle-btn:hover {
            background: #f9fafb;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transform: translateY(-50%) scale(1.05);
        }

        /* User profile dropdown - Positioned closer to trigger */
        .profile-dropdown {
            display: none;
            position: fixed;
            width: 200px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            border: 1px solid #e5e7eb;
            z-index: 100;
            padding: 8px 0;
            left: 20px;
            bottom: 60px;
        }

        .sidebar.collapsed-lg .profile-dropdown {
            left: 20px;
        }

        /* Medium screens dropdown positioning */
        @media (min-width: 768px) and (max-width: 1023px) {
            .profile-dropdown {
                left: 20px;
                bottom: 60px;
            }
        }

        /* Large screens dropdown positioning */
        @media (min-width: 1024px) {
            .profile-dropdown {
                left: 20px;
                bottom: 50px;
            }
            
            .sidebar:not(.collapsed-lg) .profile-dropdown {
                left: 220px;
            }
        }

        .profile-dropdown.show {
            display: block;
        }

        /* Mobile styles */
        @media (max-width: 767px) {
            .profile-dropdown {
                position: fixed;
                left: 20px;
                bottom: 60px;
                transform: none;
                width: 200px;
                max-width: none;
            }
            
            .sidebar.mobile-open .profile-dropdown {
                left: 20px;
            }
            
            .toggle-btn {
                display: none;
            }
        }

        /* Medium devices (768px and up) - Fixed sidebar with icons only, not expandable */
        @media (min-width: 768px) {
            .sidebar {
                transform: translateX(0);
                width: 80px;
                border-right: 1px solid #e5e7eb;
            }

            .sidebar .nav-text {
                display: none;
            }

            .sidebar .logo-text {
                display: none;
            }

            .sidebar .user-name,
            .sidebar .user-status {
                display: none;
            }

            .main-content {
                margin-left: 80px;
            }

            /* Hide toggle button on medium screens */
            .toggle-btn {
                display: none;
            }

            /* Hide three dots menu on medium screens */
            #sidebarUserMenu {
                display: none;
            }
        }

        /* Large devices (1024px and up) - Expandable sidebar */
        @media (min-width: 1024px) {
            .sidebar {
                width: 280px;
                border-right: 1px solid #e5e7eb;
            }

            .sidebar .nav-text {
                display: inline;
            }

            .sidebar .logo-text {
                display: inline;
            }

            .sidebar .user-name,
            .sidebar .user-status {
                display: block;
            }

            .main-content {
                margin-left: 280px;
            }

            .sidebar.collapsed-lg {
                width: 80px;
                border-right: 1px solid #e5e7eb;
            }

            .sidebar.collapsed-lg .nav-text {
                display: none;
            }

            .sidebar.collapsed-lg .logo-text {
                display: none;
            }

            .sidebar.collapsed-lg .user-name,
            .sidebar.collapsed-lg .user-status {
                display: none;
            }

            .main-content.collapsed-lg {
                margin-left: 80px;
            }

            /* Show toggle button on large screens */
            .toggle-btn {
                display: flex;
            }

            /* Show three dots when sidebar is expanded, hide when collapsed */
            .sidebar:not(.collapsed-lg) #sidebarUserMenu {
                display: block;
            }
            
            .sidebar.collapsed-lg #sidebarUserMenu {
                display: none;
            }
        }

        .profile-item {
            padding: 10px 16px;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .profile-item:hover {
            background: #f9fafb;
        }

        .profile-item.active {
            background: rgba(159, 122, 234, 0.1);
        }

        .profile-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            margin-right: 12px;
            font-size: 14px;
        }

        /* Top bar user profile */
        .topbar-profile {
            position: relative;
        }

        .topbar-dropdown {
            display: none;
            position: absolute;
            top: 50px;
            right: 0;
            width: 200px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            border: 1px solid #e5e7eb;
            z-index: 60;
            padding: 8px 0;
        }

        .topbar-dropdown.show {
            display: block;
        }

        /* Scrollable sidebar navigation */
        .sidebar-nav {
            flex: 1;
            overflow-y: auto;
            max-height: calc(100vh - 200px);
        }

        .sidebar-nav::-webkit-scrollbar {
            width: 4px;
        }

        .sidebar-nav::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .sidebar-nav::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 10px;
        }

        .sidebar-nav::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }

        /* Improved responsive text sizes */
        .responsive-text {
            font-size: 0.875rem;
        }

        @media (min-width: 640px) {
            .responsive-text {
                font-size: 1rem;
            }
        }

        .responsive-heading {
            font-size: 1.25rem;
        }

        @media (min-width: 640px) {
            .responsive-heading {
                font-size: 1.5rem;
            }
        }

        @media (min-width: 1024px) {
            .responsive-heading {
                font-size: 1.875rem;
            }
        }

        /* Improved button responsiveness */
        .responsive-button {
            padding: 0.75rem 1rem;
            font-size: 0.875rem;
        }

        @media (min-width: 640px) {
            .responsive-button {
                padding: 0.875rem 1.5rem;
                font-size: 1rem;
            }
        }

        /* Improved card responsiveness */
        .responsive-card {
            padding: 1rem;
        }

        @media (min-width: 640px) {
            .responsive-card {
                padding: 1.5rem;
            }
        }
        
        /* Settings specific styles */
        .setting-group {
            border-bottom: 1px solid #e5e7eb;
            padding-bottom: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .setting-group:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        
        .tag-input-container {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            align-items: center;
        }
        
        .tag {
            background-color: #9F7AEA;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.65rem;
            display: flex;
            align-items: center;
        }
        
        .tag-remove {
            margin-left: 0.5rem;
            cursor: pointer;
        }
        
        .theme-option {
            border: 2px solid #e5e7eb;
            border-radius: 0.75rem;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .theme-option:hover {
            border-color: #9F7AEA;
        }
        
        .theme-option.active {
            border-color: #9F7AEA;
            background-color: rgba(159, 122, 234, 0.05);
        }
        
        .color-scheme-option {
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .color-scheme-option.active {
            border-color: #2D3748;
            transform: scale(1.1);
        }
        
        .size-input-group {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1rem;
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background-color: #9F7AEA;
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }
    </style>
</head>

<body class="bg-light font-inter">
    <!-- Sidebar Overlay for Mobile -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Side Navigation -->
    <div class="sidebar fixed left-0 top-0 bg-white shadow-lg z-50" id="sidebar">
        <!-- Logo Section -->
        <div class="p-6 py-5 border-b border-gray-200 flex items-center justify-between">
            <div class="flex items-center">
                <i class="fas fa-tshirt text-primary text-2xl mr-3"></i>
                <span class="logo-text text-xl font-bold text-dark">StyleHub</span>
            </div>
            <button class="text-gray-500 hover:text-primary md:hidden" id="closeSidebar">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>

        <!-- Navigation Links - Scrollable -->
        <div class="sidebar-nav py-4">
            <a href="dashboard.html" class="nav-link flex items-center py-3 px-6 text-dark font-medium">
                <i class="fas fa-th-large text-primary mr-4 text-lg"></i>
                <span class="nav-text">Dashboard</span>
            </a>
            <a href="#" class="nav-link flex items-center py-3 px-6 text-dark font-medium">
                <i class="fas fa-archive text-primary mr-4 text-lg"></i>
                <span class="nav-text">My Wardrobe</span>
            </a>
            <a href="#" class="nav-link flex items-center py-3 px-6 text-dark font-medium">
                <i class="fas fa-heart text-primary mr-4 text-lg"></i>
                <span class="nav-text">Interests</span>
            </a>
            <a href="#" class="nav-link flex items-center py-3 px-6 text-dark font-medium">
                <i class="fas fa-bookmark text-primary mr-4 text-lg"></i>
                <span class="nav-text">Wishlist</span>
            </a>
            <a href="shopping.html" class="nav-link flex items-center py-3 px-6 text-dark font-medium">
                <i class="fas fa-shopping-cart text-primary mr-4 text-lg"></i>
                <span class="nav-text">Shopping</span>
            </a>
            <a href="orders.html" class="nav-link flex items-center py-3 px-6 text-dark font-medium">
                <i class="fas fa-shopping-bag text-primary mr-4 text-lg"></i>
                <span class="nav-text">Orders</span>
            </a>
            <a href="settings.html" class="nav-link active flex items-center py-3 px-6 text-dark font-medium">
                <i class="fas fa-cog text-primary mr-4 text-lg"></i>
                <span class="nav-text">Settings</span>
            </a>
        </div>

        <!-- User Section - Always visible at bottom -->
        <div class="absolute bottom-0 w-full p-4 border-t border-gray-200 bg-white">
            <div class="flex items-center justify-between">
                <div class="flex items-center cursor-pointer" id="sidebarUser">
                    <div class="w-10 h-10 bg-primary rounded-full flex items-center justify-center text-white font-bold" id="currentUserAvatar">
                        U
                    </div>
                    <div class="ml-3">
                        <p class="user-name text-sm font-medium text-dark" id="currentUserName">
                            User Name
                        </p>
                        <p class="user-status text-xs text-gray-500" id="currentUserStatus">
                            Premium Member
                        </p>
                    </div>
                </div>
                <button class="text-gray-500 hover:text-primary user-menu-toggle" id="sidebarUserMenu">
                    <i class="fas fa-ellipsis-v"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Profile Dropdown - Positioned closer to trigger -->
    <div class="profile-dropdown" id="profileDropdown">
        <div class="profile-item active" data-user="user" data-name="User Name" data-status="Premium Member" data-avatar="U" data-color="primary">
            <div class="profile-avatar bg-primary">U</div>
            <div>
                <p class="text-sm font-medium text-dark">
                    User Name
                </p>
                <p class="text-xs text-gray-500">
                    Premium Member
                </p>
            </div>
        </div>
        <div class="profile-item" data-user="alex" data-name="Alex Johnson" data-status="Family Account" data-avatar="A" data-color="secondary">
            <div class="profile-avatar bg-secondary">A</div>
            <div>
                <p class="text-sm font-medium text-dark">
                    Alex Johnson
                </p>
                <p class="text-xs text-gray-500">
                    Family Account
                </p>
            </div>
        </div>
        <div class="profile-item" data-user="sarah" data-name="Sarah Wilson" data-status="Guest" data-avatar="S" data-color="accent">
            <div class="profile-avatar bg-accent">S</div>
            <div>
                <p class="text-sm font-medium text-dark">
                    Sarah Wilson
                </p>
                <p class="text-xs text-gray-500">Guest</p>
            </div>
        </div>
        <div class="border-t border-gray-200 mt-2 pt-2">
            <div class="profile-item">
                <i class="fas fa-user-plus text-primary mr-3"></i>
                <span class="text-sm">Add Profile</span>
            </div>
            <div class="profile-item">
                <i class="fas fa-cog text-gray-500 mr-3"></i>
                <span class="text-sm">Manage Profiles</span>
            </div>
        </div>
    </div>

    <!-- Toggle Button - Moves with sidebar -->
    <button class="toggle-btn text-gray-500 hover:text-primary" id="toggleSidebar">
        <i class="fas fa-chevron-left text-sm"></i>
    </button>

    <!-- Main Content -->
    <div class="main-content min-h-screen" id="mainContent">
        <!-- Top Bar -->
        <div class="bg-white shadow-sm py-5 px-6 flex justify-between items-center sticky top-0 z-40">
            <div class="flex items-center">
                <!-- Hamburger Menu for Mobile -->
                <button class="text-gray-500 hover:text-primary md:hidden mr-4" id="openSidebar">
                    <i class="fas fa-bars text-xl"></i>
                </button>
                <h1 class="text-xl font-bold text-dark">
                    Settings - <span id="profileDisplayName">User Name</span>
                </h1>
            </div>
            <div class="flex items-center space-x-4">
                <div class="relative">
                    <button class="bg-white text-primary border border-primary px-2 py-1 rounded-full font-medium hover:bg-primary hover:text-white transition">
                        <i class="fas fa-bell"></i>
                    </button>
                    <span class="absolute -top-0.5 -right-0.5 bg-accent text-white text-[10px] rounded-full h-3 w-3 flex items-center justify-center">1</span>
                </div>

                <!-- Top Bar User Profile -->
                <div class="topbar-profile relative">
                    <div class="flex items-center space-x-2 cursor-pointer" id="topbarUser">
                        <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center text-white font-bold" id="topbarUserAvatar">
                            U
                        </div>
                    </div>

                    <!-- Top Bar Dropdown -->
                    <div class="topbar-dropdown" id="topbarDropdown">
                        <div class="profile-item active" data-user="user" data-name="User Name" data-status="Premium Member" data-avatar="U" data-color="primary">
                            <div class="profile-avatar bg-primary">
                                U
                            </div>
                            <div>
                                <p class="text-sm font-medium text-dark">
                                    User Name
                                </p>
                                <p class="text-xs text-gray-500">
                                    Premium Member
                                </p>
                            </div>
                        </div>
                        <div class="profile-item" data-user="alex" data-name="Alex Johnson" data-status="Family Account" data-avatar="A" data-color="secondary">
                            <div class="profile-avatar bg-secondary">
                                A
                            </div>
                            <div>
                                <p class="text-sm font-medium text-dark">
                                    Alex Johnson
                                </p>
                                <p class="text-xs text-gray-500">
                                    Family Account
                                </p>
                            </div>
                        </div>
                        <div class="profile-item" data-user="sarah" data-name="Sarah Wilson" data-status="Guest" data-avatar="S" data-color="accent">
                            <div class="profile-avatar bg-accent">
                                S
                            </div>
                            <div>
                                <p class="text-sm font-medium text-dark">
                                    Sarah Wilson
                                </p>
                                <p class="text-xs text-gray-500">Guest</p>
                            </div>
                        </div>
                        <div class="border-t border-gray-200 mt-2 pt-2">
                            <div class="profile-item">
                                <i class="fas fa-user-plus text-primary mr-3"></i>
                                <span class="text-sm">Add Profile</span>
                            </div>
                            <div class="profile-item">
                                <i class="fas fa-cog text-gray-500 mr-3"></i>
                                <span class="text-sm">Manage Profiles</span>
                            </div>
                            <div class="profile-item">
                                <i class="fas fa-sign-out-alt text-gray-500 mr-3"></i>
                                <span class="text-sm">Logout</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Content -->
        <div class="container mx-auto px-4 sm:px-6 py-8">
            <!-- Profile Header -->
            <div class="bg-white rounded-2xl shadow-lg responsive-card mb-8">
                <div class="flex flex-col md:flex-row items-center md:items-start gap-6">
                    <div class="relative">
                        <div class="w-24 h-24 bg-primary rounded-full flex items-center justify-center text-white text-2xl font-bold" id="profileHeaderAvatar">
                            U
                        </div>
                        <button class="absolute bottom-0 right-0 bg-secondary text-white p-2 rounded-full">
                            <i class="fas fa-camera text-sm"></i>
                        </button>
                    </div>
                    <div class="flex-1 text-center md:text-left">
                        <h2 class="text-2xl font-bold text-dark mb-2" id="profileHeaderName">User Name</h2>
                        <p class="text-gray-600 mb-4" id="profileHeaderStatus">Premium Member â€¢ Joined October 2022</p>
                        <div class="flex flex-wrap gap-2 justify-center md:justify-start">
                            <span class="bg-primary/20 text-primary px-3 py-1 rounded-full text-sm">Fashion Enthusiast</span>
                            <span class="bg-secondary/20 text-secondary px-3 py-1 rounded-full text-sm">Minimalist</span>
                            <span class="bg-accent/20 text-accent px-3 py-1 rounded-full text-sm">Active Wear</span>
                        </div>
                    </div>
                    <div class="flex gap-3">
                        <button class="bg-primary text-white responsive-button rounded-lg font-bold hover:bg-purple-700 transition flex items-center">
                            <i class="fas fa-save mr-2"></i> Save Changes
                        </button>
                        <button class="bg-white text-gray-700 border border-gray-300 responsive-button rounded-lg font-bold hover:bg-gray-50 transition flex items-center">
                            <i class="fas fa-redo mr-2"></i> Reset
                        </button>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Left Column - Navigation -->
                <div class="lg:col-span-1">
                    <div class="bg-white rounded-2xl shadow-lg responsive-card sticky top-24">
                        <h3 class="font-bold text-dark mb-4">Settings Categories</h3>
                        <div class="space-y-2">
                            <button class="settings-nav-btn w-full text-left py-3 px-4 rounded-lg font-medium text-dark bg-primary/10 border-l-4 border-primary" data-section="wardrobe">
                                <i class="fas fa-archive mr-3"></i> Wardrobe Settings
                            </button>
                            <button class="settings-nav-btn w-full text-left py-3 px-4 rounded-lg font-medium text-gray-600 hover:bg-gray-50" data-section="body">
                                <i class="fas fa-user mr-3"></i> Body Customizations
                            </button>
                            <button class="settings-nav-btn w-full text-left py-3 px-4 rounded-lg font-medium text-gray-600 hover:bg-gray-50" data-section="app">
                                <i class="fas fa-palette mr-3"></i> App Preferences
                            </button>
                            <button class="settings-nav-btn w-full text-left py-3 px-4 rounded-lg font-medium text-gray-600 hover:bg-gray-50" data-section="notifications">
                                <i class="fas fa-bell mr-3"></i> Notifications
                            </button>
                            <button class="settings-nav-btn w-full text-left py-3 px-4 rounded-lg font-medium text-gray-600 hover:bg-gray-50" data-section="privacy">
                                <i class="fas fa-shield-alt mr-3"></i> Privacy & Security
                            </button>
                            <button class="settings-nav-btn w-full text-left py-3 px-4 rounded-lg font-medium text-gray-600 hover:bg-gray-50" data-section="data">
                                <i class="fas fa-database mr-3"></i> Data Management
                            </button>
                        </div>
                    </div>
                </div>

                 <!-- Right Column - Settings Content -->
                <div class="lg:col-span-2 space-y-8">
                    <!-- Wardrobe Settings -->
                    <div class="settings-section active bg-white rounded-2xl shadow-lg responsive-card" id="wardrobe-section">
                        <h2 class="responsive-heading font-bold text-dark mb-6">
                            <i class="fas fa-archive text-primary mr-3"></i> Wardrobe Settings
                        </h2>
                        
                        <div class="space-y-6">
                            <!-- Laundry Duration -->
                            <div class="setting-group">
                                <h3 class="text-lg font-semibold text-dark mb-3">Laundry Settings</h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Default Laundry Duration</label>
                                        <select class="w-full bg-gray-100 border-0 rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-primary" id="laundryDuration">
                                            <option value="1">1 day (High urgency)</option>
                                            <option value="2" selected>2 days (Medium urgency)</option>
                                            <option value="3">3 days (Low urgency)</option>
                                            <option value="5">5 days (Very low urgency)</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Laundry Reminder</label>
                                        <select class="w-full bg-gray-100 border-0 rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-primary" id="laundryReminder">
                                            <option value="1">1 day before due</option>
                                            <option value="2" selected>2 days before due</option>
                                            <option value="3">3 days before due</option>
                                            <option value="0">No reminders</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Item Disposal Settings -->
                            <div class="setting-group">
                                <h3 class="text-lg font-semibold text-dark mb-3">Item Disposal Settings</h3>
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="font-medium text-dark">Auto-archive unworn items</p>
                                        <p class="text-sm text-gray-600">Automatically archive items not worn in the last 6 months</p>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="autoArchive">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                                <div class="mt-4">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Archive after (months)</label>
                                    <input type="number" min="1" max="24" class="w-full bg-gray-100 border-0 rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-primary" id="archiveAfter" value="6" disabled>
                                </div>
                            </div>
                            
                            <!-- Clothing Categories -->
                            <div class="setting-group">
                                <h3 class="text-lg font-semibold text-dark mb-3">Clothing Categories</h3>
                                <p class="text-sm text-gray-600 mb-4">Customize the categories used to organize your wardrobe</p>
                                <div class="tag-input-container mb-4 flex flex-col items-start">
                                    <div id="categoryTags" class='flex flex-wrap gap-2 mb-5'>
                                        <span class="tag">Tops <span class="tag-remove" data-tag="Tops">&times;</span></span>
                                        <span class="tag">Bottoms <span class="tag-remove" data-tag="Bottoms">&times;</span></span>
                                        <span class="tag">Dresses <span class="tag-remove" data-tag="Dresses">&times;</span></span>
                                        <span class="tag">Outerwear <span class="tag-remove" data-tag="Outerwear">&times;</span></span>
                                        <span class="tag">Shoes <span class="tag-remove" data-tag="Shoes">&times;</span></span>
                                        <span class="tag">Accessories <span class="tag-remove" data-tag="Accessories">&times;</span></span>
                                    </div>
                                    <input type="text" id="categoryInput" class="bg-gray-100 border-0 rounded-lg py-2 px-4 focus:outline-none focus:ring-2 focus:ring-primary flex-grow" placeholder="Add a category...">
                                    <button class="bg-primary text-white py-2 px-4 rounded-lg font-medium hover:bg-purple-700 transition" id="addCategoryBtn">Add</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Body Customizations -->
                    <div class="settings-section bg-white rounded-2xl shadow-lg responsive-card" id="body-section">
                        <h2 class="responsive-heading font-bold text-dark mb-6">
                            <i class="fas fa-user text-primary mr-3"></i> Body Customizations
                        </h2>
                        
                        <div class="space-y-6">
                            <!-- Body Measurements -->
                            <div class="setting-group">
                                <h3 class="text-lg font-semibold text-dark mb-3">Body Measurements</h3>
                                <p class="text-sm text-gray-600 mb-4">These measurements help us recommend clothing that fits you perfectly</p>
                                
                                <div class="size-input-group">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Height (cm)</label>
                                        <input type="number" min="100" max="250" class="w-full bg-gray-100 border-0 rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-primary" id="height" placeholder="170">
                                        <div class="validation-message" id="heightError"></div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Weight (kg)</label>
                                        <input type="number" min="30" max="200" class="w-full bg-gray-100 border-0 rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-primary" id="weight" placeholder="65">
                                        <div class="validation-message" id="weightError"></div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Chest (cm)</label>
                                        <input type="number" min="50" max="150" class="w-full bg-gray-100 border-0 rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-primary" id="chest" placeholder="95">
                                        <div class="validation-message" id="chestError"></div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Waist (cm)</label>
                                        <input type="number" min="50" max="150" class="w-full bg-gray-100 border-0 rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-primary" id="waist" placeholder="80">
                                        <div class="validation-message" id="waistError"></div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Hips (cm)</label>
                                        <input type="number" min="50" max="150" class="w-full bg-gray-100 border-0 rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-primary" id="hips" placeholder="100">
                                        <div class="validation-message" id="hipsError"></div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Inseam (cm)</label>
                                        <input type="number" min="50" max="100" class="w-full bg-gray-100 border-0 rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-primary" id="inseam" placeholder="78">
                                        <div class="validation-message" id="inseamError"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Fit Preferences -->
                            <div class="setting-group">
                                <h3 class="text-lg font-semibold text-dark mb-3">Fit Preferences</h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Top Fit</label>
                                        <select class="w-full bg-gray-100 border-0 rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-primary" id="topFit">
                                            <option value="slim">Slim Fit</option>
                                            <option value="regular" selected>Regular Fit</option>
                                            <option value="loose">Loose Fit</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Bottom Fit</label>
                                        <select class="w-full bg-gray-100 border-0 rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-primary" id="bottomFit">
                                            <option value="slim">Slim Fit</option>
                                            <option value="regular" selected>Regular Fit</option>
                                            <option value="loose">Loose Fit</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Sleeve Length</label>
                                        <select class="w-full bg-gray-100 border-0 rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-primary" id="sleeveLength">
                                            <option value="short">Short</option>
                                            <option value="regular" selected>Regular</option>
                                            <option value="long">Long</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Pant Length</label>
                                        <select class="w-full bg-gray-100 border-0 rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-primary" id="pantLength">
                                            <option value="short">Short</option>
                                            <option value="regular" selected>Regular</option>
                                            <option value="long">Long</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- App Preferences -->
                    <div class="settings-section bg-white rounded-2xl shadow-lg responsive-card" id="app-section">
                        <h2 class="responsive-heading font-bold text-dark mb-6">
                            <i class="fas fa-palette text-primary mr-3"></i> App Preferences
                        </h2>
                        
                        <div class="space-y-6">
                            <!-- Wishlist Notifications -->
                            <div class="setting-group">
                                <h3 class="text-lg font-semibold text-dark mb-3">Wishlist Notifications</h3>
                                
                                <div class="space-y-4">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="font-medium text-dark">Wishlist Availability Alerts</p>
                                            <p class="text-sm text-gray-600">Get notified when items in your wishlist become available</p>
                                        </div>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="wishlistNotifications">
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                    
                                    <!-- Notification Frequency Options (shown when wishlist notifications are enabled) -->
                                    <div class="notification-frequency" id="wishlistFrequencyOptions">
                                        <h4 class="font-medium text-dark mb-3">Notification Frequency</h4>
                                        <div class="space-y-2">
                                            <div class="frequency-option">
                                                <input type="radio" id="frequencyImmediate" name="wishlistFrequency" value="immediate" checked>
                                                <label for="frequencyImmediate" class="text-dark">Immediately when available</label>
                                            </div>
                                            <div class="frequency-option">
                                                <input type="radio" id="frequencyDaily" name="wishlistFrequency" value="daily">
                                                <label for="frequencyDaily" class="text-dark">Daily summary</label>
                                            </div>
                                            <div class="frequency-option">
                                                <input type="radio" id="frequencyWeekly" name="wishlistFrequency" value="weekly">
                                                <label for="frequencyWeekly" class="text-dark">Weekly summary</label>
                                            </div>
                                        </div>
                                        
                                        <!-- Additional options for immediate notifications -->
                                        <div class="mt-4" id="immediateOptions">
                                            <div class="flex items-center justify-between mb-3">
                                                <div>
                                                    <p class="font-medium text-dark">Price Drop Alerts</p>
                                                    <p class="text-sm text-gray-600">Notify me when wishlist items go on sale</p>
                                                </div>
                                                <label class="toggle-switch">
                                                    <input type="checkbox" id="priceDropAlerts">
                                                    <span class="toggle-slider"></span>
                                                </label>
                                            </div>
                                            
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <p class="font-medium text-dark">Restock Alerts</p>
                                                    <p class="text-sm text-gray-600">Notify me when out-of-stock items are restocked</p>
                                                </div>
                                                <label class="toggle-switch">
                                                    <input type="checkbox" id="restockAlerts" checked>
                                                    <span class="toggle-slider"></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Theme Selection -->
                            <div class="setting-group">
                                <h3 class="text-lg font-semibold text-dark mb-3">Theme Selection</h3>
                                <p class="text-sm text-gray-600 mb-4">Choose how StyleHub looks</p>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                    <div class="theme-option active" data-theme="light">
                                        <div class="flex items-center">
                                            <i class="fas fa-sun text-yellow-500 text-xl mr-3"></i>
                                            <div>
                                                <p class="font-medium text-dark">Light Mode</p>
                                                <p class="text-sm text-gray-600">Clean and bright interface</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="theme-option" data-theme="dark">
                                        <div class="flex items-center">
                                            <i class="fas fa-moon text-indigo-500 text-xl mr-3"></i>
                                            <div>
                                                <p class="font-medium text-dark">Dark Mode</p>
                                                <p class="text-sm text-gray-600">Easy on the eyes</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div>
                                    <h4 class="font-medium text-dark mb-3">Color Scheme</h4>
                                    <div class="flex space-x-4">
                                        <div class="color-scheme-option active bg-primary" data-color="primary"></div>
                                        <div class="color-scheme-option bg-secondary" data-color="secondary"></div>
                                        <div class="color-scheme-option bg-accent" data-color="accent"></div>
                                        <div class="color-scheme-option bg-success" data-color="success"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Language and Region -->
                            <div class="setting-group">
                                <h3 class="text-lg font-semibold text-dark mb-3">Language & Region</h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Language</label>
                                        <select class="w-full bg-gray-100 border-0 rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-primary" id="language">
                                            <option value="en" selected>English</option>
                                            <option value="es">EspaÃ±ol</option>
                                            <option value="fr">FranÃ§ais</option>
                                            <option value="de">Deutsch</option>
                                            <option value="it">Italiano</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Region</label>
                                        <select class="w-full bg-gray-100 border-0 rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-primary" id="region">
                                            <option value="us" selected>United States</option>
                                            <option value="uk">United Kingdom</option>
                                            <option value="eu">European Union</option>
                                            <option value="ca">Canada</option>
                                            <option value="au">Australia</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Units -->
                            <div class="setting-group">
                                <h3 class="text-lg font-semibold text-dark mb-3">Units</h3>
                                <div class="flex items-center space-x-6">
                                    <div class="flex items-center">
                                        <input type="radio" id="metric" name="units" value="metric" class="mr-2" checked>
                                        <label for="metric" class="text-dark">Metric (cm, kg)</label>
                                    </div>
                                    <div class="flex items-center">
                                        <input type="radio" id="imperial" name="units" value="imperial" class="mr-2">
                                        <label for="imperial" class="text-dark">Imperial (inches, lbs)</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Notifications -->
                    <div class="settings-section bg-white rounded-2xl shadow-lg responsive-card" id="notifications-section">
                        <h2 class="responsive-heading font-bold text-dark mb-6">
                            <i class="fas fa-bell text-primary mr-3"></i> Notification Settings
                        </h2>
                        
                        <div class="space-y-6">
                            <!-- Notification Toggles -->
                            <div class="setting-group">
                                <h3 class="text-lg font-semibold text-dark mb-3">Notification Preferences</h3>
                                
                                <div class="space-y-4">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="font-medium text-dark">Push Notifications</p>
                                            <p class="text-sm text-gray-600">Receive notifications on your device</p>
                                        </div>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="pushNotifications" checked>
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                    
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="font-medium text-dark">Email Notifications</p>
                                            <p class="text-sm text-gray-600">Receive notifications via email</p>
                                        </div>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="emailNotifications" checked>
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                    
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="font-medium text-dark">SMS Notifications</p>
                                            <p class="text-sm text-gray-600">Receive notifications via SMS</p>
                                        </div>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="smsNotifications">
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Notification Types -->
                            <div class="setting-group">
                                <h3 class="text-lg font-semibold text-dark mb-3">Notification Types</h3>
                                
                                <div class="space-y-4">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="font-medium text-dark">Laundry Reminders</p>
                                            <p class="text-sm text-gray-600">Get reminded when laundry is due</p>
                                        </div>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="laundryReminders" checked>
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                    
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="font-medium text-dark">Outfit Suggestions</p>
                                            <p class="text-sm text-gray-600">Daily outfit recommendations</p>
                                        </div>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="outfitSuggestions" checked>
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                    
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="font-medium text-dark">Shopping Alerts</p>
                                            <p class="text-sm text-gray-600">Sales and new arrivals</p>
                                        </div>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="shoppingAlerts" checked>
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                    
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="font-medium text-dark">Style Tips</p>
                                            <p class="text-sm text-gray-600">Fashion tips and trends</p>
                                        </div>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="styleTips">
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Quiet Hours -->
                            <div class="setting-group">
                                <h3 class="text-lg font-semibold text-dark mb-3">Quiet Hours</h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Start Time</label>
                                        <input type="time" class="w-full bg-gray-100 border-0 rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-primary" id="quietStart" value="22:00">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">End Time</label>
                                        <input type="time" class="w-full bg-gray-100 border-0 rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-primary" id="quietEnd" value="07:00">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Privacy & Security -->
                    <div class="settings-section bg-white rounded-2xl shadow-lg responsive-card" id="privacy-section">
                        <h2 class="responsive-heading font-bold text-dark mb-6">
                            <i class="fas fa-shield-alt text-primary mr-3"></i> Privacy & Security
                        </h2>
                        
                        <div class="space-y-6">
                            <!-- Privacy Settings -->
                            <div class="setting-group">
                                <h3 class="text-lg font-semibold text-dark mb-3">Privacy Settings</h3>
                                
                                <div class="space-y-4">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="font-medium text-dark">Public Profile</p>
                                            <p class="text-sm text-gray-600">Allow others to view your profile</p>
                                        </div>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="publicProfile">
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                    
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="font-medium text-dark">Share Outfits</p>
                                            <p class="text-sm text-gray-600">Allow others to see your outfits</p>
                                        </div>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="shareOutfits">
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                    
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="font-medium text-dark">Data Sharing</p>
                                            <p class="text-sm text-gray-600">Share anonymous data to improve recommendations</p>
                                        </div>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="dataSharing" checked>
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Security Settings -->
                            <div class="setting-group">
                                <h3 class="text-lg font-semibold text-dark mb-3">Security Settings</h3>
                                
                                <div class="space-y-4">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="font-medium text-dark">Two-Factor Authentication</p>
                                            <p class="text-sm text-gray-600">Add an extra layer of security to your account</p>
                                        </div>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="twoFactorAuth">
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                    
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="font-medium text-dark">Login Notifications</p>
                                            <p class="text-sm text-gray-600">Get notified of new logins to your account</p>
                                        </div>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="loginNotifications" checked>
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Data Control -->
                            <div class="setting-group">
                                <h3 class="text-lg font-semibold text-dark mb-3">Data Control</h3>
                                
                                <div class="space-y-4">
                                    <button class="w-full text-left py-3 px-4 rounded-lg font-medium text-dark bg-gray-100 hover:bg-gray-200 transition flex items-center justify-between" id="downloadDataBtn">
                                        <span>Download Your Data</span>
                                        <i class="fas fa-download text-primary"></i>
                                    </button>
                                    
                                    <button class="w-full text-left py-3 px-4 rounded-lg font-medium text-dark bg-gray-100 hover:bg-gray-200 transition flex items-center justify-between" id="deleteAccountBtn">
                                        <span>Delete Account</span>
                                        <i class="fas fa-trash text-accent"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Data Management -->
                    <div class="settings-section bg-white rounded-2xl shadow-lg responsive-card" id="data-section">
                        <h2 class="responsive-heading font-bold text-dark mb-6">
                            <i class="fas fa-database text-primary mr-3"></i> Data Management
                        </h2>
                        
                        <div class="space-y-6">
                            <!-- Backup & Restore -->
                            <div class="setting-group">
                                <h3 class="text-lg font-semibold text-dark mb-3">Backup & Restore</h3>
                                
                                <div class="space-y-4">
                                    <div class="flex flex-col sm:flex-row gap-4">
                                        <button class="bg-primary text-white py-3 px-6 rounded-lg font-medium hover:bg-purple-700 transition flex items-center justify-center" id="backupDataBtn">
                                            <i class="fas fa-cloud-upload-alt mr-2"></i> Backup Data
                                        </button>
                                        
                                        <button class="bg-white text-gray-700 border border-gray-300 py-3 px-6 rounded-lg font-medium hover:bg-gray-50 transition flex items-center justify-center" id="restoreDataBtn">
                                            <i class="fas fa-cloud-download-alt mr-2"></i> Restore Data
                                        </button>
                                    </div>
                                    
                                    <p class="text-sm text-gray-600">Last backup: <span id="lastBackupDate">Never</span></p>
                                </div>
                            </div>
                            
                            <!-- Import/Export -->
                            <div class="import-export-section">
                                <h3 class="text-lg font-semibold text-dark mb-3">Import & Export</h3>
                                
                                <div class="space-y-4">
                                    <div class="flex flex-col sm:flex-row gap-4">
                                        <button class="bg-secondary text-white py-3 px-6 rounded-lg font-medium hover:bg-teal-500 transition flex items-center justify-center" id="exportSettingsBtn">
                                            <i class="fas fa-file-export mr-2"></i> Export Settings
                                        </button>
                                        
                                        <button class="bg-white text-gray-700 border border-gray-300 py-3 px-6 rounded-lg font-medium hover:bg-gray-50 transition flex items-center justify-center" id="importSettingsBtn">
                                            <i class="fas fa-file-import mr-2"></i> Import Settings
                                        </button>
                                    </div>
                                    
                                    <p class="text-sm text-gray-600">Export your settings to a file or import from a previous backup</p>
                                </div>
                            </div>
                            
                            <!-- Storage Usage -->
                            <div class="setting-group">
                                <h3 class="text-lg font-semibold text-dark mb-3">Storage Usage</h3>
                                
                                <div class="space-y-4">
                                    <div>
                                        <div class="flex justify-between mb-1">
                                            <span class="text-sm font-medium text-dark">Wardrobe Images</span>
                                            <span class="text-sm text-gray-600">1.2 GB / 5 GB</span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-2">
                                            <div class="bg-primary h-2 rounded-full" style="width: 24%"></div>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <div class="flex justify-between mb-1">
                                            <span class="text-sm font-medium text-dark">App Data</span>
                                            <span class="text-sm text-gray-600">350 MB / 5 GB</span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-2">
                                            <div class="bg-secondary h-2 rounded-full" style="width: 7%"></div>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <div class="flex justify-between mb-1">
                                            <span class="text-sm font-medium text-dark">Backups</span>
                                            <span class="text-sm text-gray-600">150 MB / 5 GB</span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-2">
                                            <div class="bg-accent h-2 rounded-full" style="width: 3%"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-4">
                                    <button class="bg-white text-gray-700 border border-gray-300 py-2 px-4 rounded-lg font-medium hover:bg-gray-50 transition flex items-center">
                                        <i class="fas fa-trash-alt mr-2"></i> Clear Cache
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

        <script>
        // DOM Elements
        const sidebar = document.getElementById('sidebar');
        const mainContent = document.getElementById('mainContent');
        const toggleBtn = document.getElementById('toggleSidebar');
        const openSidebarBtn = document.getElementById('openSidebar');
        const closeSidebarBtn = document.getElementById('closeSidebar');
        const sidebarOverlay = document.getElementById('sidebarOverlay');
        const sidebarUser = document.getElementById('sidebarUser');
        const sidebarUserMenu = document.getElementById('sidebarUserMenu');
        const profileDropdown = document.getElementById('profileDropdown');
        const topbarUser = document.getElementById('topbarUser');
        const topbarDropdown = document.getElementById('topbarDropdown');

        // Sidebar state
        let isSidebarCollapsed = false;

        // Toggle sidebar on large screens
        function toggleSidebarLG() {
            isSidebarCollapsed = !isSidebarCollapsed;

            if (window.innerWidth >= 1024) {
                // Large devices
                if (isSidebarCollapsed) {
                    sidebar.classList.add('collapsed-lg');
                    mainContent.classList.add('collapsed-lg');
                    toggleBtn.innerHTML = '<i class="fas fa-chevron-right text-sm"></i>';
                    toggleBtn.style.left = '68px';
                    profileDropdown.style.left = '80px';
                } else {
                    sidebar.classList.remove('collapsed-lg');
                    mainContent.classList.remove('collapsed-lg');
                    toggleBtn.innerHTML = '<i class="fas fa-chevron-left text-sm"></i>';
                    toggleBtn.style.left = '268px';
                    profileDropdown.style.left = '280px';
                }
            }
        }

        // Update toggle button and dropdown positions based on sidebar state
        function updatePositions() {
            if (sidebar.classList.contains('collapsed-lg')) {
                toggleBtn.style.left = '68px';
                profileDropdown.style.left = '80px';
            } else {
                toggleBtn.style.left = '268px';
                profileDropdown.style.left = '50px';
            }
        }

        // Open sidebar on mobile
        function openSidebarMobile() {
            sidebar.classList.add('mobile-open');
            sidebarOverlay.classList.add('active');
            document.body.style.overflow = 'hidden';
            // Update toggle button position when mobile sidebar opens
            toggleBtn.style.left = '280px';
        }

        // Close sidebar on mobile
        function closeSidebarMobile() {
            sidebar.classList.remove('mobile-open');
            sidebarOverlay.classList.remove('active');
            document.body.style.overflow = '';
            // Reset toggle button position when mobile sidebar closes
            if (window.innerWidth >= 1024) {
                updatePositions();
            } else {
                toggleBtn.style.display = 'none';
            }
        }

        // Toggle profile dropdown based on screen size and sidebar state
        function toggleProfileDropdown(event) {
            event.stopPropagation();
            
            // Close topbar dropdown if open
            topbarDropdown.classList.remove('show');
            
            // Toggle profile dropdown
            profileDropdown.classList.toggle('show');
        }

        // Toggle topbar dropdown
        function toggleTopbarDropdown(event) {
            event.stopPropagation();
            
            // Close profile dropdown if open
            profileDropdown.classList.remove('show');
            
            // Toggle topbar dropdown
            topbarDropdown.classList.toggle('show');
        }

        // Close all dropdowns
        function closeAllDropdowns() {
            profileDropdown.classList.remove('show');
            topbarDropdown.classList.remove('show');
        }

        // Enhanced click outside handler
        function handleClickOutside(event) {
            const isProfileDropdownClick = profileDropdown.contains(event.target);
            const isTopbarDropdownClick = topbarDropdown.contains(event.target);
            const isSidebarUserClick = sidebarUser.contains(event.target);
            const isSidebarUserMenuClick = sidebarUserMenu.contains(event.target);
            const isTopbarUserClick = topbarUser.contains(event.target);
            
            // Close dropdowns if click is outside of all dropdown elements and their triggers
            if (!isProfileDropdownClick && !isSidebarUserClick && !isSidebarUserMenuClick) {
                profileDropdown.classList.remove('show');
            }
            
            if (!isTopbarDropdownClick && !isTopbarUserClick) {
                topbarDropdown.classList.remove('show');
            }
        }

        // Handle responsive behavior
        function handleResponsive() {
            if (window.innerWidth >= 768 && window.innerWidth < 1024) {
                // Medium screens - icon-only sidebar, not expandable
                closeSidebarMobile();
                sidebar.classList.remove('collapsed-lg', 'mobile-open');
                mainContent.classList.remove('collapsed-lg');
                
                // Hide toggle button on medium screens
                toggleBtn.style.display = 'none';
                
                // Ensure three dots are hidden on medium screens
                sidebarUserMenu.style.display = 'none';
                
            } else if (window.innerWidth >= 1024) {
                // Large screens - expandable sidebar
                closeSidebarMobile();
                toggleBtn.style.display = 'flex';
                
                // Initialize positions
                updatePositions();
                
                // Show/hide three dots based on sidebar state
                if (sidebar.classList.contains('collapsed-lg')) {
                    sidebarUserMenu.style.display = 'none';
                } else {
                    sidebarUserMenu.style.display = 'block';
                }
            } else {
                // Small screens
                sidebar.classList.remove('collapsed-lg');
                mainContent.classList.remove('collapsed-lg');
                closeSidebarMobile();
                
                // Hide toggle button on mobile
                toggleBtn.style.display = 'none';
                
                // Show three dots on mobile when sidebar is open
                sidebarUserMenu.style.display = 'block';
            }
        }

        // Set up event listeners based on screen size
        function setupEventListeners() {
            // Remove all existing event listeners first
            sidebarUser.removeEventListener('click', toggleProfileDropdown);
            sidebarUserMenu.removeEventListener('click', toggleProfileDropdown);
            
            if (window.innerWidth >= 768 && window.innerWidth < 1024) {
                // Medium screens: profile icon opens dropdown
                sidebarUser.addEventListener('click', toggleProfileDropdown);
            } else if (window.innerWidth >= 1024) {
                // Large screens: 
                if (sidebar.classList.contains('collapsed-lg')) {
                    // When collapsed: profile icon opens dropdown
                    sidebarUser.addEventListener('click', toggleProfileDropdown);
                } else {
                    // When expanded: three dots opens dropdown
                    sidebarUserMenu.addEventListener('click', toggleProfileDropdown);
                }
            } else {
                // Mobile screens: three dots opens dropdown when sidebar is open
                sidebarUserMenu.addEventListener('click', toggleProfileDropdown);
            }
        }

        // Event Listeners
        toggleBtn.addEventListener('click', toggleSidebarLG);
        openSidebarBtn.addEventListener('click', openSidebarMobile);
        closeSidebarBtn.addEventListener('click', closeSidebarMobile);
        sidebarOverlay.addEventListener('click', closeSidebarMobile);
        topbarUser.addEventListener('click', toggleTopbarDropdown);

        // Enhanced click outside detection - listen for clicks anywhere in the document
        document.addEventListener('click', handleClickOutside);

        // Handle window resize
        window.addEventListener('resize', () => {
            handleResponsive();
            setupEventListeners();
        });

        // Update event listeners when sidebar is toggled on large screens
        toggleBtn.addEventListener('click', () => {
            if (window.innerWidth >= 1024) {
                setTimeout(() => {
                    handleResponsive();
                    setupEventListeners();
                }, 300); // Wait for transition to complete
            }
        });

        // Initialize
        handleResponsive();
        setupEventListeners();

        // Close dropdowns on escape key
        document.addEventListener('keydown', (event) => {
            if (event.key === 'Escape') {
                closeAllDropdowns();
            }
        });

        // Enhanced Settings Functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize the application
            initApp();
            
            function initApp() {
                // Load saved settings
                loadSettings();
                
                // Initialize navigation
                initNavigation();
                
                // Initialize profile switching
                initProfileSwitching();
                
                // Initialize settings sections
                initSettingsSections();
                
                // Initialize form validation
                initFormValidation();
                
                // Initialize theme selection
                initThemeSelection();
                
                // Initialize category management
                initCategoryManagement();
                
                // Initialize import/export functionality
                initImportExport();
                
                // Initialize backup functionality
                initBackupFunctionality();
                
                // Initialize avatar upload
                initAvatarUpload();
            }
            
            // Load settings from localStorage
            function loadSettings() {
                const currentUser = getCurrentUser();
                const userSettings = JSON.parse(localStorage.getItem(`stylehub_settings_${currentUser}`)) || {};
                
                // Apply saved settings to form elements
                applySettingsToForm(userSettings);
                
                // Update UI based on saved settings
                updateUIFromSettings(userSettings);
                
                // Update last backup date
                const lastBackup = localStorage.getItem(`stylehub_last_backup_${currentUser}`);
                if (lastBackup) {
                    document.getElementById('lastBackupDate').textContent = new Date(lastBackup).toLocaleString();
                }
            }
            
            // Get current user
            function getCurrentUser() {
                return localStorage.getItem('stylehub_current_user') || 'user';
            }
            
            // Apply settings to form elements
            function applySettingsToForm(settings) {
                // Wardrobe settings
                if (settings.laundryDuration) document.getElementById('laundryDuration').value = settings.laundryDuration;
                if (settings.laundryReminder) document.getElementById('laundryReminder').value = settings.laundryReminder;
                if (settings.autoArchive !== undefined) document.getElementById('autoArchive').checked = settings.autoArchive;
                if (settings.archiveAfter) document.getElementById('archiveAfter').value = settings.archiveAfter;
                
                // Body measurements
                if (settings.height) document.getElementById('height').value = settings.height;
                if (settings.weight) document.getElementById('weight').value = settings.weight;
                if (settings.chest) document.getElementById('chest').value = settings.chest;
                if (settings.waist) document.getElementById('waist').value = settings.waist;
                if (settings.hips) document.getElementById('hips').value = settings.hips;
                if (settings.inseam) document.getElementById('inseam').value = settings.inseam;
                
                // Fit preferences
                if (settings.topFit) document.getElementById('topFit').value = settings.topFit;
                if (settings.bottomFit) document.getElementById('bottomFit').value = settings.bottomFit;
                if (settings.sleeveLength) document.getElementById('sleeveLength').value = settings.sleeveLength;
                if (settings.pantLength) document.getElementById('pantLength').value = settings.pantLength;
                
                // App preferences
                if (settings.language) document.getElementById('language').value = settings.language;
                if (settings.region) document.getElementById('region').value = settings.region;
                if (settings.units) {
                    document.getElementById(settings.units).checked = true;
                }
                
                // Wishlist notifications
                if (settings.wishlistNotifications !== undefined) {
                    document.getElementById('wishlistNotifications').checked = settings.wishlistNotifications;
                    toggleWishlistFrequencyOptions(settings.wishlistNotifications);
                }
                if (settings.wishlistFrequency) {
                    document.querySelector(`input[name="wishlistFrequency"][value="${settings.wishlistFrequency}"]`).checked = true;
                    toggleImmediateOptions(settings.wishlistFrequency === 'immediate');
                }
                if (settings.priceDropAlerts !== undefined) document.getElementById('priceDropAlerts').checked = settings.priceDropAlerts;
                if (settings.restockAlerts !== undefined) document.getElementById('restockAlerts').checked = settings.restockAlerts;
                
                // Notification settings
                if (settings.pushNotifications !== undefined) document.getElementById('pushNotifications').checked = settings.pushNotifications;
                if (settings.emailNotifications !== undefined) document.getElementById('emailNotifications').checked = settings.emailNotifications;
                if (settings.smsNotifications !== undefined) document.getElementById('smsNotifications').checked = settings.smsNotifications;
                if (settings.laundryReminders !== undefined) document.getElementById('laundryReminders').checked = settings.laundryReminders;
                if (settings.outfitSuggestions !== undefined) document.getElementById('outfitSuggestions').checked = settings.outfitSuggestions;
                if (settings.shoppingAlerts !== undefined) document.getElementById('shoppingAlerts').checked = settings.shoppingAlerts;
                if (settings.styleTips !== undefined) document.getElementById('styleTips').checked = settings.styleTips;
                if (settings.quietStart) document.getElementById('quietStart').value = settings.quietStart;
                if (settings.quietEnd) document.getElementById('quietEnd').value = settings.quietEnd;
                
                // Privacy & security
                if (settings.publicProfile !== undefined) document.getElementById('publicProfile').checked = settings.publicProfile;
                if (settings.shareOutfits !== undefined) document.getElementById('shareOutfits').checked = settings.shareOutfits;
                if (settings.dataSharing !== undefined) document.getElementById('dataSharing').checked = settings.dataSharing;
                if (settings.twoFactorAuth !== undefined) document.getElementById('twoFactorAuth').checked = settings.twoFactorAuth;
                if (settings.loginNotifications !== undefined) document.getElementById('loginNotifications').checked = settings.loginNotifications;
                
                // Categories
                if (settings.categories) {
                    const categoryTags = document.getElementById('categoryTags');
                    categoryTags.innerHTML = '';
                    settings.categories.forEach(category => {
                        const tag = document.createElement('span');
                        tag.className = 'tag';
                        tag.innerHTML = `${category} <span class="tag-remove" data-tag="${category}">&times;</span>`;
                        categoryTags.appendChild(tag);
                    });
                    
                    // Reattach event listeners
                    initCategoryManagement();
                }
                
                // Theme
                if (settings.theme) {
                    const themeOption = document.querySelector(`.theme-option[data-theme="${settings.theme}"]`);
                    if (themeOption) {
                        document.querySelectorAll('.theme-option').forEach(option => {
                            option.classList.remove('active');
                        });
                        themeOption.classList.add('active');
                        applyTheme(settings.theme);
                    }
                }
                
                // Color scheme
                if (settings.colorScheme) {
                    const colorOption = document.querySelector(`.color-scheme-option[data-color="${settings.colorScheme}"]`);
                    if (colorOption) {
                        document.querySelectorAll('.color-scheme-option').forEach(option => {
                            option.classList.remove('active');
                        });
                        colorOption.classList.add('active');
                        applyColorScheme(settings.colorScheme);
                    }
                }
            }
            
            // Update UI from settings
            function updateUIFromSettings(settings) {
                // Enable/disable archive after input based on auto-archive setting
                const autoArchive = document.getElementById('autoArchive');
                const archiveAfter = document.getElementById('archiveAfter');
                
                if (autoArchive.checked) {
                    archiveAfter.disabled = false;
                } else {
                    archiveAfter.disabled = true;
                }
            }
            
            // Save settings to localStorage
            function saveSettings() {
                const currentUser = getCurrentUser();
                const settings = gatherSettings();
                
                localStorage.setItem(`stylehub_settings_${currentUser}`, JSON.stringify(settings));
                
                // Show success message
                showNotification('Settings saved successfully!', 'success');
            }
            
            // Gather all settings from form elements
            function gatherSettings() {
                const settings = {};
                
                // Wardrobe settings
                settings.laundryDuration = document.getElementById('laundryDuration').value;
                settings.laundryReminder = document.getElementById('laundryReminder').value;
                settings.autoArchive = document.getElementById('autoArchive').checked;
                settings.archiveAfter = document.getElementById('archiveAfter').value;
                
                // Body measurements
                settings.height = document.getElementById('height').value;
                settings.weight = document.getElementById('weight').value;
                settings.chest = document.getElementById('chest').value;
                settings.waist = document.getElementById('waist').value;
                settings.hips = document.getElementById('hips').value;
                settings.inseam = document.getElementById('inseam').value;
                
                // Fit preferences
                settings.topFit = document.getElementById('topFit').value;
                settings.bottomFit = document.getElementById('bottomFit').value;
                settings.sleeveLength = document.getElementById('sleeveLength').value;
                settings.pantLength = document.getElementById('pantLength').value;
                
                // App preferences
                settings.language = document.getElementById('language').value;
                settings.region = document.getElementById('region').value;
                settings.units = document.querySelector('input[name="units"]:checked').value;
                
                // Wishlist notifications
                settings.wishlistNotifications = document.getElementById('wishlistNotifications').checked;
                const wishlistFrequency = document.querySelector('input[name="wishlistFrequency"]:checked');
                settings.wishlistFrequency = wishlistFrequency ? wishlistFrequency.value : 'immediate';
                settings.priceDropAlerts = document.getElementById('priceDropAlerts').checked;
                settings.restockAlerts = document.getElementById('restockAlerts').checked;
                
                // Notification settings
                settings.pushNotifications = document.getElementById('pushNotifications').checked;
                settings.emailNotifications = document.getElementById('emailNotifications').checked;
                settings.smsNotifications = document.getElementById('smsNotifications').checked;
                settings.laundryReminders = document.getElementById('laundryReminders').checked;
                settings.outfitSuggestions = document.getElementById('outfitSuggestions').checked;
                settings.shoppingAlerts = document.getElementById('shoppingAlerts').checked;
                settings.styleTips = document.getElementById('styleTips').checked;
                settings.quietStart = document.getElementById('quietStart').value;
                settings.quietEnd = document.getElementById('quietEnd').value;
                
                // Privacy & security
                settings.publicProfile = document.getElementById('publicProfile').checked;
                settings.shareOutfits = document.getElementById('shareOutfits').checked;
                settings.dataSharing = document.getElementById('dataSharing').checked;
                settings.twoFactorAuth = document.getElementById('twoFactorAuth').checked;
                settings.loginNotifications = document.getElementById('loginNotifications').checked;
                
                // Categories
                const categoryTags = document.querySelectorAll('#categoryTags .tag');
                settings.categories = Array.from(categoryTags).map(tag => {
                    return tag.textContent.replace('Ã—', '').trim();
                });
                
                // Theme
                const activeTheme = document.querySelector('.theme-option.active');
                if (activeTheme) {
                    settings.theme = activeTheme.dataset.theme;
                }
                
                // Color scheme
                const activeColor = document.querySelector('.color-scheme-option.active');
                if (activeColor) {
                    settings.colorScheme = activeColor.dataset.color;
                }
                
                return settings;
            }
            
            // Initialize navigation
            function initNavigation() {
                // Settings navigation
                const navButtons = document.querySelectorAll('.settings-nav-btn');
                const sections = document.querySelectorAll('.settings-section');
                
                navButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        const targetSection = this.dataset.section;
                        
                        // Update active nav button
                        navButtons.forEach(btn => {
                            btn.classList.remove('bg-primary/10', 'border-primary');
                            btn.classList.add('text-gray-600', 'hover:bg-gray-50');
                        });
                        
                        this.classList.remove('text-gray-600', 'hover:bg-gray-50');
                        this.classList.add('bg-primary/10', 'border-primary');
                        
                        // Show target section
                        sections.forEach(section => {
                            section.classList.remove('active');
                        });
                        
                        document.getElementById(`${targetSection}-section`).classList.add('active');
                    });
                });
            }
            
            // Initialize profile switching
            function initProfileSwitching() {
                const profileItems = document.querySelectorAll('.profile-item:not(#addProfileBtn):not(#manageProfilesBtn):not(#topbarAddProfileBtn):not(#topbarManageProfilesBtn)');
                
                profileItems.forEach(item => {
                    item.addEventListener('click', function() {
                        const user = this.dataset.user;
                        const name = this.dataset.name;
                        const status = this.dataset.status;
                        const avatar = this.dataset.avatar;
                        const color = this.dataset.color;
                        const image = this.dataset.image;
                        
                        // Update current user in localStorage
                        localStorage.setItem('stylehub_current_user', user);
                        
                        // Update all profile displays
                        updateProfileDisplay(name, status, avatar, color, image);
                        
                        // Close dropdowns
                        closeAllDropdowns();
                        
                        // Reload settings for the new user
                        loadSettings();
                        
                        // Show notification
                        showNotification(`Switched to ${name}`, 'success');
                    });
                });
                
                // Add profile button
                const addProfileBtns = document.querySelectorAll('#addProfileBtn, #topbarAddProfileBtn');
                addProfileBtns.forEach(btn => {
                    btn.addEventListener('click', function() {
                        closeAllDropdowns();
                        showNotification('Add profile feature coming soon!', 'info');
                    });
                });
                
                // Manage profiles button
                const manageProfileBtns = document.querySelectorAll('#manageProfilesBtn, #topbarManageProfilesBtn');
                manageProfileBtns.forEach(btn => {
                    btn.addEventListener('click', function() {
                        closeAllDropdowns();
                        showNotification('Manage profiles feature coming soon!', 'info');
                    });
                });
            }
            
            // Update profile display across the app
            function updateProfileDisplay(name, status, avatar, color, image) {
                // Update profile display name
                document.getElementById('profileDisplayName').textContent = name;
                
                // Update profile header
                document.getElementById('profileHeaderName').textContent = name;
                document.getElementById('profileHeaderStatus').textContent = status;
                
                // Update all avatar displays
                const avatarElements = document.querySelectorAll('#currentUserAvatar, #topbarUserAvatar, #profileHeaderAvatar');
                const avatarTextElements = document.querySelectorAll('#currentUserAvatarText, #topbarUserAvatarText, #profileHeaderAvatarText');
                const avatarImgElements = document.querySelectorAll('#currentUserAvatarImg, #topbarUserAvatarImg, #profileHeaderAvatarImg');
                
                avatarElements.forEach(element => {
                    element.className = element.className.replace(/bg-\w+/g, '');
                    element.classList.add(`bg-${color}`);
                });
                
                avatarTextElements.forEach(element => {
                    element.textContent = avatar;
                });
                
                // If there's a profile image, use it
                if (image) {
                    avatarImgElements.forEach(img => {
                        img.src = image;
                        img.style.display = 'block';
                    });
                    
                    avatarTextElements.forEach(text => {
                        text.style.display = 'none';
                    });
                } else {
                    avatarImgElements.forEach(img => {
                        img.style.display = 'none';
                    });
                    
                    avatarTextElements.forEach(text => {
                        text.style.display = 'block';
                    });
                }
                
                // Update user name and status in sidebar
                document.getElementById('currentUserName').textContent = name;
                document.getElementById('currentUserStatus').textContent = status;
            }
            
            // Initialize settings sections
            function initSettingsSections() {
                // Auto-archive toggle
                const autoArchive = document.getElementById('autoArchive');
                const archiveAfter = document.getElementById('archiveAfter');
                
                autoArchive.addEventListener('change', function() {
                    if (this.checked) {
                        archiveAfter.disabled = false;
                    } else {
                        archiveAfter.disabled = true;
                    }
                });
                
                // Save settings button
                const saveSettingsBtn = document.querySelector('button.bg-primary');
                if (saveSettingsBtn) {
                    saveSettingsBtn.addEventListener('click', saveSettings);
                }
                
                // Reset settings button
                const resetSettingsBtn = document.querySelector('button.bg-white');
                if (resetSettingsBtn) {
                    resetSettingsBtn.addEventListener('click', function() {
                        if (confirm('Are you sure you want to reset all settings to their default values?')) {
                            localStorage.removeItem(`stylehub_settings_${getCurrentUser()}`);
                            location.reload();
                        }
                    });
                }
                
                // Download data button
                document.getElementById('downloadDataBtn').addEventListener('click', function() {
                    showNotification('Data download feature coming soon!', 'info');
                });
                
                // Delete account button
                document.getElementById('deleteAccountBtn').addEventListener('click', function() {
                    if (confirm('Are you sure you want to delete your account? This action cannot be undone.')) {
                        showNotification('Account deletion feature coming soon!', 'info');
                    }
                });
            }
            
            // Initialize form validation
            function initFormValidation() {
                const measurementInputs = document.querySelectorAll('#height, #weight, #chest, #waist, #hips, #inseam');
                
                measurementInputs.forEach(input => {
                    input.addEventListener('blur', function() {
                        validateMeasurement(this);
                    });
                });
            }
            
            // Validate measurement input
            function validateMeasurement(input) {
                const value = parseFloat(input.value);
                const id = input.id;
                const errorElement = document.getElementById(`${id}Error`);
                
                // Clear previous error
                input.classList.remove('validation-error');
                errorElement.textContent = '';
                
                // Skip validation if empty
                if (!input.value) return true;
                
                let isValid = true;
                let message = '';
                
                switch(id) {
                    case 'height':
                        if (value < 100 || value > 250) {
                            isValid = false;
                            message = 'Height must be between 100 and 250 cm';
                        }
                        break;
                    case 'weight':
                        if (value < 30 || value > 200) {
                            isValid = false;
                            message = 'Weight must be between 30 and 200 kg';
                        }
                        break;
                    case 'chest':
                    case 'waist':
                    case 'hips':
                        if (value < 50 || value > 150) {
                            isValid = false;
                            message = 'Measurement must be between 50 and 150 cm';
                        }
                        break;
                    case 'inseam':
                        if (value < 50 || value > 100) {
                            isValid = false;
                            message = 'Inseam must be between 50 and 100 cm';
                        }
                        break;
                }
                
                if (!isValid) {
                    input.classList.add('validation-error');
                    errorElement.textContent = message;
                }
                
                return isValid;
            }
            
            // Initialize theme selection
            function initThemeSelection() {
                // Theme options
                const themeOptions = document.querySelectorAll('.theme-option');
                
                themeOptions.forEach(option => {
                    option.addEventListener('click', function() {
                        themeOptions.forEach(opt => opt.classList.remove('active'));
                        this.classList.add('active');
                        
                        const theme = this.dataset.theme;
                        applyTheme(theme);
                        
                        // Save theme preference
                        const currentUser = getCurrentUser();
                        const settings = JSON.parse(localStorage.getItem(`stylehub_settings_${currentUser}`)) || {};
                        settings.theme = theme;
                        localStorage.setItem(`stylehub_settings_${currentUser}`, JSON.stringify(settings));
                    });
                });
                
                // Color scheme options
                const colorOptions = document.querySelectorAll('.color-scheme-option');
                
                colorOptions.forEach(option => {
                    option.addEventListener('click', function() {
                        colorOptions.forEach(opt => opt.classList.remove('active'));
                        this.classList.add('active');
                        
                        const color = this.dataset.color;
                        applyColorScheme(color);
                        
                        // Save color scheme preference
                        const currentUser = getCurrentUser();
                        const settings = JSON.parse(localStorage.getItem(`stylehub_settings_${currentUser}`)) || {};
                        settings.colorScheme = color;
                        localStorage.setItem(`stylehub_settings_${currentUser}`, JSON.stringify(settings));
                    });
                });
            }
            
            // Apply theme to the page
            function applyTheme(theme) {
                if (theme === 'dark') {
                    document.body.classList.add('dark-mode');
                } else {
                    document.body.classList.remove('dark-mode');
                }
            }
            
            // Apply color scheme to the page
            function applyColorScheme(color) {
                // This would update CSS variables in a real app
                // For this demo, we'll just show a notification
                showNotification(`Color scheme changed to ${color}`, 'info');
            }
            
            // Initialize category management
            function initCategoryManagement() {
                const categoryInput = document.getElementById('categoryInput');
                const addCategoryBtn = document.getElementById('addCategoryBtn');
                const categoryTags = document.getElementById('categoryTags');
                
                // Add category
                addCategoryBtn.addEventListener('click', addCategory);
                categoryInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        addCategory();
                    }
                });
                
                // Remove category
                const removeButtons = document.querySelectorAll('.tag-remove');
                removeButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        const tag = this.parentElement;
                        tag.remove();
                        
                        // Save categories
                        saveCategories();
                    });
                });
            }
            
            // Add a new category
            function addCategory() {
                const categoryInput = document.getElementById('categoryInput');
                const categoryName = categoryInput.value.trim();
                
                if (categoryName) {
                    // Check if category already exists
                    const existingCategories = Array.from(document.querySelectorAll('#categoryTags .tag')).map(tag => {
                        return tag.textContent.replace('Ã—', '').trim();
                    });
                    
                    if (existingCategories.includes(categoryName)) {
                        showNotification('Category already exists!', 'error');
                        return;
                    }
                    
                    // Create new tag
                    const tag = document.createElement('span');
                    tag.className = 'tag';
                    tag.innerHTML = `${categoryName} <span class="tag-remove" data-tag="${categoryName}">&times;</span>`;
                    
                    // Add to container
                    document.getElementById('categoryTags').appendChild(tag);
                    
                    // Clear input
                    categoryInput.value = '';
                    
                    // Add event listener to remove button
                    tag.querySelector('.tag-remove').addEventListener('click', function() {
                        tag.remove();
                        saveCategories();
                    });
                    
                    // Save categories
                    saveCategories();
                    
                    showNotification(`Category "${categoryName}" added`, 'success');
                }
            }
            
            // Save categories to localStorage
            function saveCategories() {
                const currentUser = getCurrentUser();
                const settings = JSON.parse(localStorage.getItem(`stylehub_settings_${currentUser}`)) || {};
                
                const categoryTags = document.querySelectorAll('#categoryTags .tag');
                settings.categories = Array.from(categoryTags).map(tag => {
                    return tag.textContent.replace('Ã—', '').trim();
                });
                
                localStorage.setItem(`stylehub_settings_${currentUser}`, JSON.stringify(settings));
            }
            
            // Initialize import/export functionality
            function initImportExport() {
                // Export settings
                document.getElementById('exportSettingsBtn').addEventListener('click', exportSettings);
                
                // Import settings
                document.getElementById('importSettingsBtn').addEventListener('click', importSettings);
            }
            
            // Export settings to a file
            function exportSettings() {
                const currentUser = getCurrentUser();
                const settings = JSON.parse(localStorage.getItem(`stylehub_settings_${currentUser}`)) || {};
                
                // Create a blob with the settings
                const blob = new Blob([JSON.stringify(settings, null, 2)], { type: 'application/json' });
                
                // Create a download link
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `stylehub-settings-${currentUser}-${new Date().toISOString().split('T')[0]}.json`;
                
                // Trigger download
                document.body.appendChild(a);
                a.click();
                
                // Clean up
                setTimeout(() => {
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                }, 100);
                
                showNotification('Settings exported successfully!', 'success');
            }
            
            // Import settings from a file
            function importSettings() {
                // Create file input
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = '.json';
                
                input.addEventListener('change', function() {
                    const file = this.files[0];
                    if (!file) return;
                    
                    const reader = new FileReader();
                    
                    reader.onload = function(e) {
                        try {
                            const settings = JSON.parse(e.target.result);
                            const currentUser = getCurrentUser();
                            
                            // Save imported settings
                            localStorage.setItem(`stylehub_settings_${currentUser}`, JSON.stringify(settings));
                            
                            // Reload the page to apply settings
                            location.reload();
                            
                            showNotification('Settings imported successfully!', 'success');
                        } catch (error) {
                            showNotification('Error importing settings: Invalid file format', 'error');
                        }
                    };
                    
                    reader.readAsText(file);
                });
                
                // Trigger file selection
                input.click();
            }
            
            // Initialize backup functionality
            function initBackupFunctionality() {
                // Backup data
                document.getElementById('backupDataBtn').addEventListener('click', backupData);
                
                // Restore data
                document.getElementById('restoreDataBtn').addEventListener('click', restoreData);
            }
            
            // Backup data
            function backupData() {
                const currentUser = getCurrentUser();
                const settings = JSON.parse(localStorage.getItem(`stylehub_settings_${currentUser}`)) || {};
                
                // In a real app, this would send data to a server
                // For this demo, we'll just update the last backup date
                const now = new Date();
                localStorage.setItem(`stylehub_last_backup_${currentUser}`, now.toISOString());
                document.getElementById('lastBackupDate').textContent = now.toLocaleString();
                
                showNotification('Data backed up successfully!', 'success');
            }
            
            // Restore data
            function restoreData() {
                if (confirm('Are you sure you want to restore from the last backup? This will overwrite your current settings.')) {
                    // In a real app, this would fetch data from a server
                    // For this demo, we'll just reload the settings
                    loadSettings();
                    
                    showNotification('Data restored successfully!', 'success');
                }
            }
            
            // Initialize avatar upload
            function initAvatarUpload() {
                const changeAvatarBtn = document.querySelector('.absolute.bottom-0.right-0.bg-secondary');
                const avatarInput = document.createElement('input');
                avatarInput.type = 'file';
                avatarInput.accept = 'image/*';
                avatarInput.style.display = 'none';
                document.body.appendChild(avatarInput);
                
                changeAvatarBtn.addEventListener('click', function() {
                    avatarInput.click();
                });
                
                avatarInput.addEventListener('change', function() {
                    const file = this.files[0];
                    if (!file) return;
                    
                    // Check if file is an image
                    if (!file.type.match('image.*')) {
                        showNotification('Please select an image file', 'error');
                        return;
                    }
                    
                    // Check file size (max 2MB)
                    if (file.size > 2 * 1024 * 1024) {
                        showNotification('Image must be less than 2MB', 'error');
                        return;
                    }
                    
                    const reader = new FileReader();
                    
                    reader.onload = function(e) {
                        // Update all avatar images
                        const avatarImgElements = document.querySelectorAll('#currentUserAvatarImg, #topbarUserAvatarImg, #profileHeaderAvatarImg, #profileDropdownImg1, #topbarDropdownImg1');
                        
                        avatarImgElements.forEach(img => {
                            img.src = e.target.result;
                            img.style.display = 'block';
                        });
                        
                        // Hide avatar text
                        const avatarTextElements = document.querySelectorAll('#currentUserAvatarText, #topbarUserAvatarText, #profileHeaderAvatarText, #profileDropdownText1, #topbarDropdownText1');
                        
                        avatarTextElements.forEach(text => {
                            text.style.display = 'none';
                        });
                        
                        // Save avatar to localStorage
                        const currentUser = getCurrentUser();
                        localStorage.setItem(`stylehub_avatar_${currentUser}`, e.target.result);
                        
                        showNotification('Avatar updated successfully!', 'success');
                    };
                    
                    reader.readAsDataURL(file);
                });
                
                // Load saved avatar
                const currentUser = getCurrentUser();
                const savedAvatar = localStorage.getItem(`stylehub_avatar_${currentUser}`);
                
                if (savedAvatar) {
                    const avatarImgElements = document.querySelectorAll('#currentUserAvatarImg, #topbarUserAvatarImg, #profileHeaderAvatarImg, #profileDropdownImg1, #topbarDropdownImg1');
                    
                    avatarImgElements.forEach(img => {
                        img.src = savedAvatar;
                        img.style.display = 'block';
                    });
                    
                    const avatarTextElements = document.querySelectorAll('#currentUserAvatarText, #topbarUserAvatarText, #profileHeaderAvatarText, #profileDropdownText1, #topbarDropdownText1');
                    
                    avatarTextElements.forEach(text => {
                        text.style.display = 'none';
                    });
                }
            }
            
            // Initialize wishlist notifications
            function initWishlistNotifications() {
                const wishlistNotifications = document.getElementById('wishlistNotifications');
                const wishlistFrequencyOptions = document.querySelectorAll('input[name="wishlistFrequency"]');
                
                // Toggle frequency options based on wishlist notifications
                wishlistNotifications.addEventListener('change', function() {
                    toggleWishlistFrequencyOptions(this.checked);
                });
                
                // Toggle immediate options based on frequency selection
                wishlistFrequencyOptions.forEach(option => {
                    option.addEventListener('change', function() {
                        toggleImmediateOptions(this.value === 'immediate');
                    });
                });
            }
            
            // Toggle wishlist frequency options
            function toggleWishlistFrequencyOptions(show) {
                const frequencySection = document.querySelector('.wishlist-frequency-section');
                if (frequencySection) {
                    frequencySection.style.display = show ? 'block' : 'none';
                }
            }
            
            // Toggle immediate options
            function toggleImmediateOptions(show) {
                const immediateOptions = document.querySelector('.immediate-options');
                if (immediateOptions) {
                    immediateOptions.style.display = show ? 'block' : 'none';
                }
            }
            
            // Show notification
            function showNotification(message, type = 'info') {
                // Create notification element
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                notification.innerHTML = `
                    <div class="notification-content">
                        <span class="notification-message">${message}</span>
                        <button class="notification-close">&times;</button>
                    </div>
                `;
                
                // Add to page
                document.body.appendChild(notification);
                
                // Show notification
                setTimeout(() => {
                    notification.classList.add('show');
                }, 10);
                
                // Auto remove after 5 seconds
                setTimeout(() => {
                    notification.classList.remove('show');
                    setTimeout(() => {
                        if (notification.parentElement) {
                            notification.parentElement.removeChild(notification);
                        }
                    }, 300);
                }, 5000);
                
                // Close button
                notification.querySelector('.notification-close').addEventListener('click', function() {
                    notification.classList.remove('show');
                    setTimeout(() => {
                        if (notification.parentElement) {
                            notification.parentElement.removeChild(notification);
                        }
                    }, 300);
                });
            }
            
            // Initialize wishlist notifications
            initWishlistNotifications();
        });
    </script>
</body>
</html> 
